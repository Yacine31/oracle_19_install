#!/bin/sh

export ADMIN_DIR={{ oracle_base }}/admin
export DIAG_DIR={{ oracle_base }}/diag
export DIAG_RDBMS=${DIAG_DIR}/rdbms
export DIAG_LSNR=${DIAG_DIR}/tnslsnr

export DAYS=15

/usr/bin/logger -t ora_db_clean_xml "Clean xml file older than $DAYS days from ${DIAG_RDBMS}"
find ${DIAG_RDBMS} -iname "*xml"  -mtime +$DAYS -print -delete | logger -t oracle_clean_xml

/usr/bin/logger -t ora_lsnr_clean_xml "Clean xml file older than $DAYS days from ${DIAG_LSNR}"
find ${DIAG_LSNR} -iname "*xml"  -mtime +$DAYS -print -delete | logger -t oracle_clean_xml

/usr/bin/logger -t ora_db_clean_trc "Clean trc file older than $DAYS days from ${DIAG_RDBMS}"
find ${DIAG_RDBMS} -iname "*trc"  -mtime +$DAYS -print -delete | logger -t oracle_clean_trc

/usr/bin/logger -t ora_db_clean_trm "Clean trm file older than $DAYS days from ${DIAG_RDBMS}"
find ${DIAG_RDBMS} -iname "*trm"  -mtime +$DAYS -print -delete | logger -t oracle_clean_trm

/usr/bin/logger -t ora_db_clean_aud "Clean audit file older than 30 days from ${ADMIN_DIR}"
find ${ADMIN_DIR} -iname "*.aud"  -mtime +30 -print -delete | logger -t oracle_clean_aud
